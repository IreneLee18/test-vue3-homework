{"ast":null,"code":"import ModalMixin from '@/mixins/ModalMixin';\nexport default {\n  props: {\n    product: {\n      type: Object,\n\n      default() {\n        return {};\n      }\n\n    }\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    }\n\n  },\n\n  data() {\n    return {\n      modal: {},\n      tempProduct: {}\n    };\n  },\n\n  methods: {\n    uploadFile() {\n      const uploadedFile = this.$refs.inputFile.files[0];\n      console.dir(uploadedFile);\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(api, formData).then(res => {\n        console.log(res);\n\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n        }\n      }).catch(err => console.log(err.response));\n    }\n\n  },\n  mixins: [ModalMixin]\n};","map":{"version":3,"mappings":"AAkJA,OAAOA,UAAP,MAAuB,qBAAvB;AACA,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MADC;;MAEPC,OAAM,GAAK;QAAE,OAAO,EAAP;MAAU;;IAFhB;EADJ,CADM;EAObC,KAAK,EAAE;IACLJ,OAAM,GAAK;MACT,KAAKK,WAAL,GAAmB,KAAKL,OAAxB;IACF;;EAHK,CAPM;;EAYbM,IAAG,GAAK;IACN,OAAO;MACLC,KAAK,EAAE,EADF;MAELF,WAAW,EAAE;IAFR,CAAP;EAID,CAjBY;;EAkBbG,OAAO,EAAE;IACPC,UAAS,GAAK;MACZ,MAAMC,YAAW,GAAI,KAAKC,KAAL,CAAWC,SAAX,CAAqBC,KAArB,CAA2B,CAA3B,CAArB;MACAC,OAAO,CAACC,GAAR,CAAYL,YAAZ;MACA,MAAMM,QAAO,GAAI,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,gBAAhB,EAAkCR,YAAlC;MACA,MAAMS,GAAE,GAAK,GAAEC,OAAO,CAACC,GAAR,CAAYC,WAAY,OAAMF,OAAO,CAACC,GAAR,CAAYE,YAAa,eAAtE;MACA,KAAKC,KAAL,CAAWC,IAAX,CAAgBN,GAAhB,EAAqBH,QAArB,EACGU,IADH,CACSC,GAAD,IAAS;QACbb,OAAO,CAACc,GAAR,CAAYD,GAAZ;;QACA,IAAIA,GAAG,CAACrB,IAAJ,CAASuB,OAAb,EAAsB;UACpB,KAAKxB,WAAL,CAAiByB,QAAjB,GAA4BH,GAAG,CAACrB,IAAJ,CAASwB,QAArC;QACF;MACD,CANH,EAOGC,KAPH,CAOUC,GAAD,IAASlB,OAAO,CAACc,GAAR,CAAYI,GAAG,CAACC,QAAhB,CAPlB;IAQF;;EAfO,CAlBI;EAmCbC,MAAM,EAAE,CAACpC,UAAD;AAnCK,CAAf","names":["ModalMixin","props","product","type","Object","default","watch","tempProduct","data","modal","methods","uploadFile","uploadedFile","$refs","inputFile","files","console","dir","formData","FormData","append","api","process","env","VUE_APP_API","VUE_APP_PATH","$http","post","then","res","log","success","imageUrl","catch","err","response","mixins"],"sourceRoot":"","sources":["/Users/irenelee/Desktop/vue-cli-demo/project/test1/src/components/ProductModal.vue"],"sourcesContent":["<template>\n  <div\n    class=\"modal fade\"\n    id=\"staticBackdrop\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    tabindex=\"-1\"\n    aria-labelledby=\"staticBackdropLabel\"\n    aria-hidden=\"true\"\n    ref=\"productModal\"\n  >\n    <!-- 請同學自行新增 v-model -->\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>新增產品</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\n                <input type=\"text\" class=\"form-control\" id=\"image\"\n                placeholder=\"請輸入圖片連結\">\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"customFile\" class=\"form-label\">或 上傳圖片\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                </label>\n                <input\n                  type=\"file\"\n                  id=\"customFile\"\n                  class=\"form-control\"\n                  ref=\"inputFile\"\n                  @change=\"uploadFile\"\n                  >\n              </div>\n              <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\">\n              <!-- 延伸技巧，多圖 -->\n              <div class=\"mt-5\">\n                <div class=\"mb-3 input-group\" >\n                  <input type=\"url\" class=\"form-control form-control\"\n                  placeholder=\"請輸入連結\">\n                  <button type=\"button\" class=\"btn btn-outline-danger\">\n                    移除\n                  </button>\n                </div>\n                <div>\n                  <button class=\"btn btn-outline-primary btn-sm d-block w-100\">\n                    新增圖片\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label\">標題</label>\n                <input type=\"text\" class=\"form-control\" id=\"title\"\n                placeholder=\"請輸入標題\"\n                v-model=\"tempProduct.title\"\n                >\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label\">分類</label>\n                  <input type=\"text\" class=\"form-control\" id=\"category\"\n                  placeholder=\"請輸入分類\"\n                  v-model=\"tempProduct.category\"\n                  >\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"unit\" class=\"form-label\">單位</label>\n                  <input type=\"text\" class=\"form-control\" id=\"unit\"\n                  placeholder=\"請輸入單位\"\n                  v-model=\"tempProduct.unit\"\n                  >\n                </div>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\n                  <input type=\"number\" class=\"form-control\" id=\"origin_price\"\n                  placeholder=\"請輸入原價\"\n                  v-model=\"tempProduct.origin_price\"\n                  >\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label\">售價</label>\n                  <input type=\"number\" class=\"form-control\" id=\"price\"\n                  placeholder=\"請輸入售價\"\n                  v-model=\"tempProduct.price\"\n                  >\n                </div>\n              </div>\n              <hr>\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label\">產品描述</label>\n                <textarea type=\"text\" class=\"form-control\" id=\"description\"\n                placeholder=\"請輸入產品描述\"\n                v-model=\"tempProduct.description\"\n                ></textarea>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label\">說明內容</label>\n                <textarea type=\"text\" class=\"form-control\" id=\"content\"\n                placeholder=\"請輸入產品說明內容\"\n                v-model=\"tempProduct.content\"\n                ></textarea>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <input class=\"form-check-input\" type=\"checkbox\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  id=\"is_enabled\"\n                  v-model=\"tempProduct.is_enabled\"\n                  >\n                  <label class=\"form-check-label\" for=\"is_enabled\">\n                    是否啟用\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\n          data-bs-dismiss=\"modal\">取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\"\n          @click=\"$emit('add-product',tempProduct)\"\n          >確認</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ModalMixin from '@/mixins/ModalMixin'\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default () { return {} }\n    }\n  },\n  watch: {\n    product () {\n      this.tempProduct = this.product\n    }\n  },\n  data () {\n    return {\n      modal: {},\n      tempProduct: {}\n    }\n  },\n  methods: {\n    uploadFile () {\n      const uploadedFile = this.$refs.inputFile.files[0]\n      console.dir(uploadedFile)\n      const formData = new FormData()\n      formData.append('file-to-upload', uploadedFile)\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`\n      this.$http.post(api, formData)\n        .then((res) => {\n          console.log(res)\n          if (res.data.success) {\n            this.tempProduct.imageUrl = res.data.imageUrl\n          }\n        })\n        .catch((err) => console.log(err.response))\n    }\n  },\n  mixins: [ModalMixin]\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}